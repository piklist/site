{"id":949,"date":"2012-12-04T15:49:25","date_gmt":"2012-12-04T20:49:25","guid":{"rendered":"http:\/\/piklist.com\/?p=949"},"modified":"2019-09-30T16:12:57","modified_gmt":"2019-09-30T20:12:57","slug":"locking-piklist","status":"publish","type":"post","link":"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/","title":{"rendered":"Locking Piklist"},"content":{"rendered":"<p>Being a framework, it is important that Piklist not be deactivated by accident. In most cases, Piklist is providing core functionality to a website, and\u00a0deactivating\u00a0it would remove that functionality possibly rendering the site useless.<\/p>\n<p>Kevin and I have gone back and forth on this quite a bit. The <em>mu-plugins<\/em> folder was an option, but we just didn&#8217;t think it was the right one. If installed in mu-plugins, Piklist could not take advantage of automatic upgrades, and if a user really wanted to disable Piklist, it would not be that easy. \u00a0Even the\u00a0<em>WordPress MU Domain Mapping<\/em> plugin, which is core to any site running it, specifies using Network Activation over mu-plugins in it&#8217;s <a href=\"http:\/\/wordpress.org\/extend\/plugins\/wordpress-mu-domain-mapping\/installation\/\">installation instructions<\/a>.<\/p>\n<p>A few weeks ago in our support Forums, <a href=\"http:\/\/piklist.com\/support\/topic\/metaboxes-disappear-when-piklist-is-in-the-mu-plugins-folder\/\">@kattagami<\/a>, mentioned that Piklist did not even work correctly in <em>mu-plugins<\/em>. At this point, Kevin and I needed to make a decision. Do we support mu-plugins, or figure out another way to lock down Piklist?<\/p>\n<p>Then last week, in the same forum thread,\u00a0<a href=\"http:\/\/piklist.com\/support\/topic\/metaboxes-disappear-when-piklist-is-in-the-mu-plugins-folder\/#post-466\">@emzo<\/a> reminded us of a post\u00a0<a href=\"http:\/\/markjaquith.wordpress.com\/2012\/05\/15\/how-i-built-have-baby-need-stuff\/\">Mark Jaquith wrote<\/a>\u00a0when he\u00a0built \u201cHave Baby. Need Stuff!\u201d. In this post, Mark shared some code to stop plugins from being deactivated. Though Marks code was designed for the mu-plugins folder, it gave us an idea (and some rock solid code), on how to implement something similar for Piklist. So here&#8217;s what we got:<\/p>\n<p>On the Piklist settings page there is an option for Piklist Deactivation.<\/p>\n<p>You have two choices:<\/p>\n<ol>\n<li>Allow Deactivation<\/li>\n<li>Lock<\/li>\n<\/ol>\n<p>If you select, &#8220;Allow Deactivation&#8221;, nothing changes. \u00a0Piklist can be deactivated like any other plugin.<\/p>\n<p>However, if you select &#8220;Lock&#8221;, then two things happen. \u00a0First, Piklist is locked down and cannot be deactivated, thanks to the WordPress filter <em>option_active_plugins<\/em>.\u00a0Second, Piklist replaces it&#8217;s own &#8220;Deactivate&#8221; link, with a link to it&#8217;s &#8220;Settings&#8221; page. If the user clicks on this link, they are brought to the Piklist settings page where they are warned about deactivating Piklist. There are also instructions on how to deactivate if they wish.<\/p>\n<div id=\"attachment_955\" style=\"width: 489px\" class=\"wp-caption alignnone\"><img aria-describedby=\"caption-attachment-955\" loading=\"lazy\" class=\" wp-image-955\" title=\"piklist-locked\" src=\"http:\/\/piklist.com\/wp-content\/uploads\/2012\/12\/piklist-locked.gif\" alt=\"\" width=\"479\" height=\"167\" \/><p id=\"caption-attachment-955\" class=\"wp-caption-text\">Piklist LOCKED: Deactivation link has been replaced with a Settings link.<\/p><\/div>\n<p>&nbsp;<\/p>\n<div id=\"attachment_961\" style=\"width: 529px\" class=\"wp-caption alignnone\"><img aria-describedby=\"caption-attachment-961\" loading=\"lazy\" class=\"size-full wp-image-961\" title=\"piklist-deactivate-warning\" src=\"http:\/\/piklist.com\/wp-content\/uploads\/2012\/12\/piklist-deactivate-warning.gif\" alt=\"\" width=\"519\" height=\"316\" srcset=\"https:\/\/piklist.com\/wp-content\/uploads\/2012\/12\/piklist-deactivate-warning.gif 519w, https:\/\/piklist.com\/wp-content\/uploads\/2012\/12\/piklist-deactivate-warning-300x182.gif 300w\" sizes=\"(max-width: 519px) 100vw, 519px\" \/><p id=\"caption-attachment-961\" class=\"wp-caption-text\">Piklist Deactivation Warning, and Instructions.<\/p><\/div>\n<p>&nbsp;<\/p>\n<p>A site Administrator should have complete control over their site. However, pressing a Deactivate link is way too easy, and with Piklist it can cause\u00a0havoc. \u00a0This new setting makes deactivating Piklist a four-click process, instead of one. \u00a0The Administrator can deactivate Pikist if they choose, but they are presented with a warning first.<\/p>\n<p>We&#8217;re not sure this is the best solution, and would love your feedback. \u00a0This setting is in Piklist v0.7.0 and does not yet work for Network Activation.\u00a0Let us know what you think in the comments.<\/p>\n<p><strong>UPDATE JULY 6, 2015<\/strong><br \/>\nThe setting to deactivate Piklist is no longer included. If you cannot deactivate Piklist it is because:<\/p>\n<ol>\n<li>You have a plugin that is activated and relies on Piklist.<\/li>\n<li>Your theme has a \/piklist\/ folder.<\/li>\n<\/ol>\n<p>Deactivate your plugin, or change themes to allow Piklist to be deactivated.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Being a framework, it is important that Piklist not be deactivated by accident. In most cases, Piklist is providing core functionality to a website, and\u00a0deactivating\u00a0it would remove that functionality possibly rendering the site useless.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[1],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v15.9.2 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Locking Piklist &bull; Piklist\" \/>\n<meta property=\"og:description\" content=\"Being a framework, it is important that Piklist not be deactivated by accident. In most cases, Piklist is providing core functionality to a website, and\u00a0deactivating\u00a0it would remove that functionality possibly rendering the site useless.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/\" \/>\n<meta property=\"og:site_name\" content=\"Piklist\" \/>\n<meta property=\"article:published_time\" content=\"2012-12-04T20:49:25+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2019-09-30T20:12:57+00:00\" \/>\n<meta property=\"og:image\" content=\"http:\/\/piklist.com\/wp-content\/uploads\/2012\/12\/piklist-locked.gif\" \/>\n<meta name=\"twitter:label1\" content=\"Est. reading time\">\n\t<meta name=\"twitter:data1\" content=\"3 minutes\">\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/piklist.com\/#organization\",\"name\":\"Piklist\",\"url\":\"https:\/\/piklist.com\/\",\"sameAs\":[],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/piklist.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/piklist.com\/wp-content\/uploads\/2015\/03\/facebook-profile.jpg\",\"width\":320,\"height\":320,\"caption\":\"Piklist\"},\"image\":{\"@id\":\"https:\/\/piklist.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/piklist.com\/#website\",\"url\":\"https:\/\/piklist.com\/\",\"name\":\"Piklist\",\"description\":\"Build Powerful Websites with WordPress\",\"publisher\":{\"@id\":\"https:\/\/piklist.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/piklist.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"http:\/\/piklist.com\/wp-content\/uploads\/2012\/12\/piklist-locked.gif\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/#webpage\",\"url\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/\",\"name\":\"Locking Piklist &bull; Piklist\",\"isPartOf\":{\"@id\":\"https:\/\/piklist.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/#primaryimage\"},\"datePublished\":\"2012-12-04T20:49:25+00:00\",\"dateModified\":\"2019-09-30T20:12:57+00:00\",\"breadcrumb\":{\"@id\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"item\":{\"@type\":\"WebPage\",\"@id\":\"https:\/\/piklist.com\/\",\"url\":\"https:\/\/piklist.com\/\",\"name\":\"Home\"}},{\"@type\":\"ListItem\",\"position\":2,\"item\":{\"@type\":\"WebPage\",\"@id\":\"http:\/\/piklist.com\/category\/news\/\",\"url\":\"http:\/\/piklist.com\/category\/news\/\",\"name\":\"News\"}},{\"@type\":\"ListItem\",\"position\":3,\"item\":{\"@type\":\"WebPage\",\"@id\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/\",\"url\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/\",\"name\":\"Locking Piklist\"}}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/#webpage\"},\"author\":{\"@id\":\"https:\/\/piklist.com\/#\/schema\/person\/572c3fb52b0d3a658332b6a5b631d012\"},\"headline\":\"Locking Piklist\",\"datePublished\":\"2012-12-04T20:49:25+00:00\",\"dateModified\":\"2019-09-30T20:12:57+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/#webpage\"},\"commentCount\":12,\"publisher\":{\"@id\":\"https:\/\/piklist.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/#primaryimage\"},\"articleSection\":\"News\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/piklist.com\/2012\/12\/04\/locking-piklist\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/piklist.com\/#\/schema\/person\/572c3fb52b0d3a658332b6a5b631d012\",\"name\":\"Steve\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/piklist.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/d5e220c24cfed7817a39a8f4d577663e?s=96&d=wavatar&r=g\",\"caption\":\"Steve\"},\"sameAs\":[\"https:\/\/piklist.com\"]}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/piklist.com\/wp-json\/wp\/v2\/posts\/949"}],"collection":[{"href":"https:\/\/piklist.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/piklist.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/piklist.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/piklist.com\/wp-json\/wp\/v2\/comments?post=949"}],"version-history":[{"count":0,"href":"https:\/\/piklist.com\/wp-json\/wp\/v2\/posts\/949\/revisions"}],"wp:attachment":[{"href":"https:\/\/piklist.com\/wp-json\/wp\/v2\/media?parent=949"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/piklist.com\/wp-json\/wp\/v2\/categories?post=949"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/piklist.com\/wp-json\/wp\/v2\/tags?post=949"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}